# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
Format of the initialization string does not conform to specification starting at index 0
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ConnectionStrings__DefaultConnection` **–Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** –∏–ª–∏ **–ø—É—Å—Ç–∞—è** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–í–∞–∂–Ω–æ:** –î–∞–∂–µ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–∏–¥–Ω–∞ –≤ Railway Dashboard, –æ–Ω–∞ –º–æ–∂–µ—Ç –Ω–µ —á–∏—Ç–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º!

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π Railway Dashboard

1. –ó–∞–π–¥–∏ –Ω–∞ https://railway.app
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç
3. –ù–∞–∂–º–∏ –Ω–∞ **API —Å–µ—Ä–≤–∏—Å** (perceptive-perception)
4. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Variables"** (–∏–ª–∏ Settings ‚Üí Variables)

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Å—å —á—Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
```
Name: ConnectionStrings__DefaultConnection
Value: ${{Postgres.DATABASE_URL}}
```

**–í–ê–ñ–ù–û:**
- –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **—Ç–æ—á–Ω–æ** `ConnectionStrings__DefaultConnection` (—Å –¥–≤–æ–π–Ω—ã–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º `__`)
- –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `${{Postgres.DATABASE_URL}}` (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç connection string)
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä—è–º–æ–π connection string** —Ç–∏–ø–∞ `postgresql://...` - –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ `${{Postgres.DATABASE_URL}}`

### ‚ö†Ô∏è –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ —á–µ—Ä–µ–∑ ${{Postgres.DATABASE_URL}}):

1. –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é —Å –∏–º–µ–Ω–µ–º `ConnectionStrings__DefaultConnection`
3. –í –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—Ç–∞–≤—å: `${{Postgres.DATABASE_URL}}`
4. –°–æ—Ö—Ä–∞–Ω–∏ –∏ –ø–æ–¥–æ–∂–¥–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –®–∞–≥ 3: –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Ç - –¥–æ–±–∞–≤—å –µ—ë

1. –ù–∞–∂–º–∏ **"+ New Variable"**
2. –í –ø–æ–ª–µ **"Name"** –≤–≤–µ–¥–∏: `ConnectionStrings__DefaultConnection`
3. –í –ø–æ–ª–µ **"Value"** –≤–≤–µ–¥–∏: `${{Postgres.DATABASE_URL}}`
4. –ù–∞–∂–º–∏ **"Add"** –∏–ª–∏ **"Save"**

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω

–í Railway Dashboard —É–±–µ–¥–∏—Å—å —á—Ç–æ:
- ‚úÖ **Postgres** —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å **"Online"** (–∑–µ–ª–µ–Ω—ã–π –∫—Ä—É–∂–æ–∫)
- ‚úÖ –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ "Online" - –Ω–∞–∂–º–∏ –Ω–∞ Postgres —Å–µ—Ä–≤–∏—Å –∏ –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ API —Å–µ—Ä–≤–∏—Å

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
1. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç API
2. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é: Settings ‚Üí Restart

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://perceptive-perception-production.up.railway.app/health/db
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "connectionStringStatus": "‚úÖ SET (length: ...)",
  "canConnect": true,
  "pendingMigrations": [],
  "appliedMigrations": ["20260113173900_InitialCreate"],
  "tablesExist": true
}
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Railway Dashboard

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Variables

Railway Dashboard ‚Üí API —Å–µ—Ä–≤–∏—Å ‚Üí Variables

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
```
ConnectionStrings__DefaultConnection = ${{Postgres.DATABASE_URL}}
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Deploy Logs

Railway Dashboard ‚Üí API —Å–µ—Ä–≤–∏—Å ‚Üí Deploy Logs

–ò—â–∏ —Å—Ç—Ä–æ–∫–∏:
- ‚úÖ `‚úÖ Database migrations applied successfully` - –≤—Å—ë –û–ö
- ‚ùå `‚ùå Cannot connect to database!` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- ‚ùå `ConnectionStrings:DefaultConnection is not configured` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞

---

## üéØ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Railway

–£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã:

```env
# Database (–ö–†–ò–¢–ò–ß–ù–û!)
ConnectionStrings__DefaultConnection=${{Postgres.DATABASE_URL}}

# OpenAI API Key
OpenAI__ApiKey=sk-proj-—Ç–≤–æ–π-–∫–ª—é—á

# OpenAI Models
OpenAI__Model=gpt-5-mini
OpenAI__DeepThinkingModel=gpt-5.2
OpenAI__WhisperModel=whisper-1
OpenAI__TTSModel=tts-1
OpenAI__EmbeddingModel=text-embedding-ada-002

# ASP.NET
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://0.0.0.0:8080
```

---

## üí° –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:

### ‚ùå –û—à–∏–±–∫–∞ 1: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
```
ConnectionStrings_DefaultConnection  ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–æ–¥–Ω–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)
ConnectionStrings__DefaultConnection ‚Üê –ü–†–ê–í–ò–õ–¨–ù–û (–¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)
```

### ‚ùå –û—à–∏–±–∫–∞ 2: –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
```
${{Postgres.DATABASE_URL}}  ‚Üê –ü–†–ê–í–ò–õ–¨–ù–û (Railway —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
postgresql://...            ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∞–ø—Ä—è–º—É—é)
```

### ‚ùå –û—à–∏–±–∫–∞ 3: PostgreSQL —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Postgres —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å "Online"
- –ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –µ–≥–æ

---

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç API
2. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. `/health/db` –ø–æ–∫–∞–∂–µ—Ç `canConnect: true`
4. `/api/tasks` –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

---

**–ì–æ—Ç–æ–≤–æ! –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üöÄ

# üîß –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

## ‚ùå –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

Connection string –Ω–∞–π–¥–µ–Ω, –Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:
- ‚úÖ `connectionStringStatus: "‚úÖ SET (length: 93)"`
- ‚ùå `canConnect: false`
- ‚ùå `tablesExist: false`
- ‚ùå `appliedMigrations: []`

–í –ª–æ–≥–∞—Ö:
```
[11:34:14 INF] Database connection: False
[11:34:14 ERR] ‚ùå Cannot connect to database!
```

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### 1. PostgreSQL —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å Postgres —Å–µ—Ä–≤–∏—Å–∞ –≤ Railway Dashboard
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å "Online" (–∑–µ–ª–µ–Ω—ã–π –∫—Ä—É–∂–æ–∫)

### 2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ö–æ—Å—Ç `postgres.railway.internal`
- Connection string —Å–æ–¥–µ—Ä–∂–∏—Ç: `postgres.railway.internal:5432`
- –≠—Ç–æ—Ç —Ö–æ—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ API
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π –ø—É–±–ª–∏—á–Ω—ã–π URL –≤–º–µ—Å—Ç–æ internal

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é/—Ñ–∞–π—Ä–≤–æ–ª–æ–º
- Railway –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π `DATABASE_PUBLIC_URL` –≤–º–µ—Å—Ç–æ `DATABASE_URL`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å PostgreSQL

Railway Dashboard ‚Üí Postgres —Å–µ—Ä–≤–∏—Å

–£–±–µ–¥–∏—Å—å —á—Ç–æ:
- ‚úÖ –°—Ç–∞—Ç—É—Å: **"Online"** (–∑–µ–ª–µ–Ω—ã–π –∫—Ä—É–∂–æ–∫)
- ‚úÖ –ï—Å–ª–∏ –Ω–µ "Online" - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑—É–π –ø—É–±–ª–∏—á–Ω—ã–π URL

–í Railway Dashboard ‚Üí Postgres —Å–µ—Ä–≤–∏—Å ‚Üí Variables –Ω–∞–π–¥–∏:
- `DATABASE_URL` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π URL (`postgres.railway.internal`)
- `DATABASE_PUBLIC_URL` - –ø—É–±–ª–∏—á–Ω—ã–π URL (–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ)

**–ò–∑–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ API —Å–µ—Ä–≤–∏—Å–µ:**

1. Railway Dashboard ‚Üí API —Å–µ—Ä–≤–∏—Å ‚Üí Variables
2. –ù–∞–π–¥–∏ `ConnectionStrings__DefaultConnection`
3. –ò–∑–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞: `${{Postgres.DATABASE_PUBLIC_URL}}`
4. –°–æ—Ö—Ä–∞–Ω–∏

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:**

–ï—Å–ª–∏ `${{Postgres.DATABASE_PUBLIC_URL}}` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∫–æ–ø–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏–µ `DATABASE_PUBLIC_URL` –∏–∑ Postgres —Å–µ—Ä–≤–∏—Å–∞ –∏ –≤—Å—Ç–∞–≤—å –Ω–∞–ø—Ä—è–º—É—é –≤ `ConnectionStrings__DefaultConnection`.

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ API —Å–µ—Ä–≤–∏—Å

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç API
- –ò–ª–∏ –≤—Ä—É—á–Ω—É—é: Settings ‚Üí Restart

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

Railway Dashboard ‚Üí API —Å–µ—Ä–≤–∏—Å ‚Üí Deploy Logs

–ò—â–∏:
- ‚úÖ `Database connection: True` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ `‚úÖ Database migrations applied successfully` - –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚ùå –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë `False` - –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞

---

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

–ï—Å–ª–∏ `DATABASE_PUBLIC_URL` –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Postgres –∏ API –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ

Railway Dashboard ‚Üí –£–±–µ–¥–∏—Å—å —á—Ç–æ:
- Postgres —Å–µ—Ä–≤–∏—Å –∏ API —Å–µ—Ä–≤–∏—Å –≤ **–æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ**
- –û–Ω–∏ —Å–≤—è–∑–∞–Ω—ã (–≤–∏–¥–Ω—ã –Ω–∞ –æ–¥–Ω–æ–π —Å—Ö–µ–º–µ)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑—É–π Railway Networking

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–≤—è–∑—å.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ PostgreSQL

Railway Dashboard ‚Üí Postgres —Å–µ—Ä–≤–∏—Å ‚Üí Logs

–ò—â–∏ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç:

```
[ ] Postgres —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω (—Å—Ç–∞—Ç—É—Å "Online")
[ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è ConnectionStrings__DefaultConnection —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
[ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DATABASE_PUBLIC_URL (–∏–ª–∏ DATABASE_URL –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)
[ ] API —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
[ ] –í –ª–æ–≥–∞—Ö: "Database connection: True"
[ ] –í –ª–æ–≥–∞—Ö: "‚úÖ Database migrations applied successfully"
[ ] /health/db –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "canConnect: true"
```

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ connection strings:
- **Internal** (`postgres.railway.internal`) - –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- **Public** (`*.railway.app` –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Ö–æ—Å—Ç) - –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ

–ï—Å–ª–∏ API –∏ Postgres –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL.

---

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å—ë –¥–æ–ª–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å!** üöÄ
